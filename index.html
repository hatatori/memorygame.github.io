<input type="text" id=txt placeholder="link da imagem" spellcheck="false"><br>
<input type="text" id=txt2 placeholder="quantidade" spellcheck="false" value="6">

<div id="bloco"></div>

<script>

	//https://i.imgur.com/6UXL7jp.jpg
	txt.value = 'imgs/1.jpg'
	txt.onkeyup=render
	txt2.onkeyup=render
	render()

	function render(){

		bloco.innerHTML = ''
		document.head.innerHTML = ''

		img = new Image()

		//img.src="https://i.imgur.com/6UXL7jp.jpg"
		img.src= txt.value

		img.onload=function(){

			w = this.width
			h = this.height

			escala = 1200/w

			q = parseInt(txt2.value)

			dw = w*escala/q
			dh = h*escala/q

			bloco.style.width = w*escala
			bloco.style.height = h*escala

			s = document.createElement("style")
			s.innerHTML = "#bloco div{width:"+dw+";height:"+dh+"; background-size:"+w+"px;background-image:url("+txt.value+");display:inline-block}"

			s.innerHTML += "#bloco{position:relative;overflow:hidden;margin:auto}"
			s.innerHTML += ".opacidade{opacity: 0.5}"
			s.innerHTML += "body{background-Color:black}input{background-color:transparent;border:none;color:#555;outline:none}"
			


			document.head.appendChild(s)

			for(i=0;i<q;i++){
				for(j=0;j<q;j++){
					bloco.innerHTML += "<div style='background-position:"+(j*dw*-1)+" "+(i*dh*-1)+" ;background-size:"+w*escala+"px'></div>"
				}
			}

			setTimeout(embaralhar,2000)

		}

		a = 0
		bloco.onclick=function(e){

			if(a++%2==0){
				b = e.target
				aux = e.target.style.backgroundPosition
				e.target.classList.toggle("opacidade")
			}else{

			//aux = e.target

			b.style.backgroundPosition = e.target.style.backgroundPosition

			e.target.style.backgroundPosition = aux
			b.classList.toggle("opacidade")
			//b.style.backgroundPosition = aux.style.backgroundPosition
		}

	}

	//embaralhar
	function embaralhar(){
		for(i=0;i <= bloco.childElementCount+101 ; i++){
			r = Math.floor(Math.random()*bloco.childElementCount)
			bloco.children[r].click()
		}
	}
}


</script>
