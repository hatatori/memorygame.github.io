<style>
	body{background-color: black;text-align: center;}
	*{transition: 0.2s}
	.quadrado{
		background-image:url("avatar_q.jpg");
		width: 100;
		height: 100;
		position: absolute;	
	}

	.bloco{
		width: 1000;
		height: 1000;
		border:solid 1px black;
		flex-wrap: wrap;
		/*display: flex;*/
		position: relative;
		margin: auto;
	}
	.sobre{
		z-index: 10
		box-shadow: 0 0 10px white;
	}

	.up{
		z-index: 50;
		transform:translateZ(100px);
		/*box-shadow: 0 0 10px red;*/
	}
	
	.centro{
		position: absolute;
		display: flex;
		justify-content: center;
		align-items: center;
		width: 100%;
		height: 100%;
	}

	button{
		border:none;
		color: white;
		padding: 10;
		outline: none;
		background-color: black;
	}
</style>


<button onclick="valor=0">Embaralhar</button>
<br><br>

<div class="bloco" id="bloco"></div>


<script>


	for(i=0;i<100;i++){

		l = i%10
		c = parseInt(i/10)

		lin = i*100*-1
		col = parseInt(i/10)*100*-1

		div = document.createElement("div")
		div.classList.add("quadrado")
		div.id=`L${l}C${c}`
		div.style.backgroundPosition=""+i*100*-1+"px "+col+"px"
		div.style.left = l*100
		div.style.top = c*100
		bloco.appendChild(div)
	}

	function swap(a,b){

		tempL = a.style.left
		tempT = a.style.top

		a.style.left = b.style.left
		a.style.top = b.style.top

		b.style.left = tempL
		b.style.top = tempT
	}


	// embaralhar
	function embaralhar(){
		for(i=0;i<100;i++){

			a1 = parseInt(Math.random()*10)
			b1 = parseInt(Math.random()*10)

			a2 = parseInt(Math.random()*10)
			b2 = parseInt(Math.random()*10)

			a = eval(`L${a1}C${b1}`)
			b = eval(`L${a2}C${b2}`)

			swap(a,b)		
		}
	}

	function clicar(){
		n = 0
		m = []

		for(i of document.querySelectorAll(".quadrado")){
			i.onclick=function(){
				if(n==0){
					m.push(this)
					m[0].classList.toggle("sobre")
					m[0].classList.toggle("up")
					n=1
				}
				else{
					m[0].classList.remove("sobre")
					m.push(this)

					// m[0].classList.toggle("sobre")
					m[1].classList.add("up")

					swap(m[0],m[1])

					setTimeout(()=>{
						m[0].classList.remove("up")
						m[1].classList.remove("up")
						m=[]
					},200)

					n=0

				}
			}
		}
	}


	// setTimeout(()=>{
	// 	embaralhar()
	// },1000)


	valor = 500
	setInterval(()=>{
		if(valor < 100 ){
			a1 = parseInt(Math.random()*10)
			b1 = parseInt(Math.random()*10)

			a2 = parseInt(Math.random()*10)
			b2 = parseInt(Math.random()*10)

			a = eval(`L${a1}C${b1}`)
			b = eval(`L${a2}C${b2}`)

			swap(a,b)
			valor++	
			clicar()
		}
	},0)
</script>